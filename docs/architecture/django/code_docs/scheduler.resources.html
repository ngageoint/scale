

<!DOCTYPE html>
<html class="writer-html4" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>scheduler.resources package &mdash; Scale 7.0.1-snapshot documentation</title>
  

  
  <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="../../../_static/favicon.ico"/>
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript">
          var DOCUMENTATION_OPTIONS = {
              URL_ROOT:'../../../',
              VERSION:'7.0.1-snapshot',
              LANGUAGE:'None',
              COLLAPSE_INDEX:false,
              FILE_SUFFIX:'.html',
              HAS_SOURCE:  true,
              SOURCELINK_SUFFIX: '.txt'
          };
      </script>
        <script type="text/javascript" src="../../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="scheduler.scheduling package" href="scheduler.scheduling.html" />
    <link rel="prev" title="scheduler.recon package" href="scheduler.recon.html" />
    <link href="../../../_static/style.css" rel="stylesheet" type="text/css">

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../index.html" class="icon icon-home" alt="Documentation Home"> Scale
          

          
            
            <img src="../../../_static/scale3-transparent-128.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                7.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../overview/index.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../cli/index.html">Command Line Client</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../algorithm_integration/index.html">Algorithm Integration into Scale</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../index.html">Architecture</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../overview.html">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../jobs/index.html">Jobs and Recipes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../logs.html">ElasticSearch Logs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../messaging.html">Messaging System</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../port.html">Import/Export</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../scan.html">Scan</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../strike.html">Strike</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../triggers.html">Triggers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../workspaces.html">Workspaces</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../index.html">Django/Code Base</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="batch.html">batch package</a></li>
<li class="toctree-l3"><a class="reference internal" href="cli.html">cli package</a></li>
<li class="toctree-l3"><a class="reference internal" href="data.html">data package</a></li>
<li class="toctree-l3"><a class="reference internal" href="diagnostic.html">diagnostic package</a></li>
<li class="toctree-l3"><a class="reference internal" href="error.html">error package</a></li>
<li class="toctree-l3"><a class="reference internal" href="ingest.html">ingest package</a></li>
<li class="toctree-l3"><a class="reference internal" href="job.html">job package</a></li>
<li class="toctree-l3"><a class="reference internal" href="mesos_api.html">mesos_api package</a></li>
<li class="toctree-l3"><a class="reference internal" href="messaging.html">messaging package</a></li>
<li class="toctree-l3"><a class="reference internal" href="metrics.html">metrics package</a></li>
<li class="toctree-l3"><a class="reference internal" href="node.html">node package</a></li>
<li class="toctree-l3"><a class="reference internal" href="product.html">product package</a></li>
<li class="toctree-l3"><a class="reference internal" href="queue.html">queue package</a></li>
<li class="toctree-l3"><a class="reference internal" href="recipe.html">recipe package</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="scheduler.html">scheduler package</a><ul class="current">
<li class="toctree-l4 current"><a class="reference internal" href="scheduler.html#subpackages">Subpackages</a></li>
<li class="toctree-l4"><a class="reference internal" href="scheduler.html#submodules">Submodules</a></li>
<li class="toctree-l4"><a class="reference internal" href="scheduler.html#module-scheduler.admin">scheduler.admin module</a></li>
<li class="toctree-l4"><a class="reference internal" href="scheduler.html#module-scheduler.apps">scheduler.apps module</a></li>
<li class="toctree-l4"><a class="reference internal" href="scheduler.html#module-scheduler.cluster_utils">scheduler.cluster_utils module</a></li>
<li class="toctree-l4"><a class="reference internal" href="scheduler.html#module-scheduler.configuration">scheduler.configuration module</a></li>
<li class="toctree-l4"><a class="reference internal" href="scheduler.html#module-scheduler.initialize">scheduler.initialize module</a></li>
<li class="toctree-l4"><a class="reference internal" href="scheduler.html#module-scheduler.manager">scheduler.manager module</a></li>
<li class="toctree-l4"><a class="reference internal" href="scheduler.html#module-scheduler.models">scheduler.models module</a></li>
<li class="toctree-l4"><a class="reference internal" href="scheduler.html#module-scheduler.scale_scheduler">scheduler.scale_scheduler module</a></li>
<li class="toctree-l4"><a class="reference internal" href="scheduler.html#module-scheduler.serializers">scheduler.serializers module</a></li>
<li class="toctree-l4"><a class="reference internal" href="scheduler.html#module-scheduler.urls">scheduler.urls module</a></li>
<li class="toctree-l4"><a class="reference internal" href="scheduler.html#module-scheduler.views">scheduler.views module</a></li>
<li class="toctree-l4"><a class="reference internal" href="scheduler.html#module-scheduler">Module contents</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="shared_resource.html">shared_resource package</a></li>
<li class="toctree-l3"><a class="reference internal" href="source.html">source package</a></li>
<li class="toctree-l3"><a class="reference internal" href="storage.html">storage package</a></li>
<li class="toctree-l3"><a class="reference internal" href="timeline.html">timeline package</a></li>
<li class="toctree-l3"><a class="reference internal" href="trigger.html">trigger package</a></li>
<li class="toctree-l3"><a class="reference internal" href="util.html">util package</a></li>
<li class="toctree-l3"><a class="reference internal" href="vault.html">vault package</a></li>
<li class="toctree-l3"><a class="reference internal" href="manage.html">manage module</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../rest/index.html">REST API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../install/index.html">Install</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../development/index.html">Development</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">Scale</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../../index.html">Architecture</a> &raquo;</li>
        
          <li><a href="../index.html">Django/Code Base</a> &raquo;</li>
        
          <li><a href="scheduler.html">scheduler package</a> &raquo;</li>
        
      <li>scheduler.resources package</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../../_sources/architecture/django/code_docs/scheduler.resources.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="scheduler-resources-package">
<h1>scheduler.resources package<a class="headerlink" href="#scheduler-resources-package" title="Permalink to this headline">¶</a></h1>
<div class="section" id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-scheduler.resources.agent">
<span id="scheduler-resources-agent-module"></span><h2>scheduler.resources.agent module<a class="headerlink" href="#module-scheduler.resources.agent" title="Permalink to this headline">¶</a></h2>
<p>Defines the class that represents an agent&#8217;s set of resource offers</p>
<dl class="class">
<dt id="scheduler.resources.agent.AgentResources">
<em class="property">class </em><code class="descclassname">scheduler.resources.agent.</code><code class="descname">AgentResources</code><span class="sig-paren">(</span><em>agent_id</em><span class="sig-paren">)</span><a class="headerlink" href="#scheduler.resources.agent.AgentResources" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>This class represents an agent&#8217;s set of resource offers.</p>
<dl class="method">
<dt id="scheduler.resources.agent.AgentResources.allocate_offers">
<code class="descname">allocate_offers</code><span class="sig-paren">(</span><em>resources</em>, <em>when</em><span class="sig-paren">)</span><a class="headerlink" href="#scheduler.resources.agent.AgentResources.allocate_offers" title="Permalink to this definition">¶</a></dt>
<dd><p>Directs the agent to allocate offers sufficient to match the given resources. Any offers that have been held
too long will automatically be included. It&#8217;s possible that the offer resources returned are less than
requested.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>resources</strong> (<a class="reference internal" href="node.resources.html#node.resources.node_resources.NodeResources" title="node.resources.node_resources.NodeResources"><code class="xref py py-class docutils literal"><span class="pre">node.resources.node_resources.NodeResources</span></code></a>) &#8211; The requested resources</li>
<li><strong>when</strong> (<code class="xref py py-class docutils literal"><span class="pre">datetime.datetime</span></code>) &#8211; The current time</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">The list of allocated offers</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">[<a class="reference internal" href="#scheduler.resources.offer.ResourceOffer" title="scheduler.resources.offer.ResourceOffer"><code class="xref py py-class docutils literal"><span class="pre">scheduler.resources.offer.ResourceOffer</span></code></a>]</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="scheduler.resources.agent.AgentResources.decline_offers">
<code class="descname">decline_offers</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#scheduler.resources.agent.AgentResources.decline_offers" title="Permalink to this definition">¶</a></dt>
<dd><p>Removes offers that haven&#8217;t been allocated
and returns them for the scheduler to decline them.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">list of declined offers</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><code class="xref py py-func docutils literal"><span class="pre">list()</span></code></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="scheduler.resources.agent.AgentResources.generate_status_json">
<code class="descname">generate_status_json</code><span class="sig-paren">(</span><em>node_dict</em>, <em>total_running=None</em>, <em>total_offered=None</em>, <em>total_watermark=None</em>, <em>total=None</em><span class="sig-paren">)</span><a class="headerlink" href="#scheduler.resources.agent.AgentResources.generate_status_json" title="Permalink to this definition">¶</a></dt>
<dd><p>Generates the portion of the status JSON that describes the resources for this agent</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>node_dict</strong> (<em>dict</em>) &#8211; The dict for this agent&#8217;s node within the status JSON</li>
<li><strong>total_running</strong> (<a class="reference internal" href="node.resources.html#node.resources.node_resources.NodeResources" title="node.resources.node_resources.NodeResources"><code class="xref py py-class docutils literal"><span class="pre">node.resources.node_resources.NodeResources</span></code></a>) &#8211; The total running resources to add up, possibly None</li>
<li><strong>total_offered</strong> (<a class="reference internal" href="node.resources.html#node.resources.node_resources.NodeResources" title="node.resources.node_resources.NodeResources"><code class="xref py py-class docutils literal"><span class="pre">node.resources.node_resources.NodeResources</span></code></a>) &#8211; The total offered resources to add up, possibly None</li>
<li><strong>total_watermark</strong> (<a class="reference internal" href="node.resources.html#node.resources.node_resources.NodeResources" title="node.resources.node_resources.NodeResources"><code class="xref py py-class docutils literal"><span class="pre">node.resources.node_resources.NodeResources</span></code></a>) &#8211; The total watermark resources to add up, possibly None</li>
<li><strong>total</strong> (<a class="reference internal" href="node.resources.html#node.resources.node_resources.NodeResources" title="node.resources.node_resources.NodeResources"><code class="xref py py-class docutils literal"><span class="pre">node.resources.node_resources.NodeResources</span></code></a>) &#8211; The total resources to add up, possibly None</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">The total number of offers this agent has</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">int</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="scheduler.resources.agent.AgentResources.get_max_resources">
<code class="descname">get_max_resources</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#scheduler.resources.agent.AgentResources.get_max_resources" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets the maximum resources for the agent</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">The maximum resources for an agent</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference internal" href="node.resources.html#node.resources.node_resources.NodeResources" title="node.resources.node_resources.NodeResources"><code class="xref py py-class docutils literal"><span class="pre">node.resources.node_resources.NodeResources</span></code></a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="scheduler.resources.agent.AgentResources.has_total_resources">
<code class="descname">has_total_resources</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#scheduler.resources.agent.AgentResources.has_total_resources" title="Permalink to this definition">¶</a></dt>
<dd><p>Indicates whether this agent knows its total resources or not</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">True if agent knows its total resources, False otherwise</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">bool</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="scheduler.resources.agent.AgentResources.refresh_resources">
<code class="descname">refresh_resources</code><span class="sig-paren">(</span><em>offers</em>, <em>tasks</em><span class="sig-paren">)</span><a class="headerlink" href="#scheduler.resources.agent.AgentResources.refresh_resources" title="Permalink to this definition">¶</a></dt>
<dd><p>Refreshes the agent&#8217;s resources by setting the current running tasks and adding new resource offers. Returns
a copy of the set of resources for the agent.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>offers</strong> ([<a class="reference internal" href="#scheduler.resources.offer.ResourceOffer" title="scheduler.resources.offer.ResourceOffer"><code class="xref py py-class docutils literal"><span class="pre">scheduler.resources.offer.ResourceOffer</span></code></a>]) &#8211; The new resource offers to add</li>
<li><strong>tasks</strong> ([<a class="reference internal" href="job.tasks.html#job.tasks.base_task.Task" title="job.tasks.base_task.Task"><code class="xref py py-class docutils literal"><span class="pre">job.tasks.base_task.Task</span></code></a>]) &#8211; The current tasks running on the agent</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">A copy of the set of agent resources</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference internal" href="#scheduler.resources.agent.ResourceSet" title="scheduler.resources.agent.ResourceSet"><code class="xref py py-class docutils literal"><span class="pre">scheduler.resources.agent.ResourceSet</span></code></a></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="scheduler.resources.agent.AgentResources.rescind_offers">
<code class="descname">rescind_offers</code><span class="sig-paren">(</span><em>offer_ids</em><span class="sig-paren">)</span><a class="headerlink" href="#scheduler.resources.agent.AgentResources.rescind_offers" title="Permalink to this definition">¶</a></dt>
<dd><p>Rescinds the offers with the given IDs</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>offer_ids</strong> (<em>[</em><em>str</em><em>]</em>) &#8211; The list of IDs of the offers to remove</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="scheduler.resources.agent.AgentResources.reset_watermark">
<code class="descname">reset_watermark</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#scheduler.resources.agent.AgentResources.reset_watermark" title="Permalink to this definition">¶</a></dt>
<dd><p>Resets the agent&#8217;s watermark to the highest recent value</p>
</dd></dl>

<dl class="method">
<dt id="scheduler.resources.agent.AgentResources.set_shortage">
<code class="descname">set_shortage</code><span class="sig-paren">(</span><em>shortage_resources=None</em><span class="sig-paren">)</span><a class="headerlink" href="#scheduler.resources.agent.AgentResources.set_shortage" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the resource shortage for the agent, if any</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>shortage_resources</strong> (<a class="reference internal" href="node.resources.html#node.resources.node_resources.NodeResources" title="node.resources.node_resources.NodeResources"><code class="xref py py-class docutils literal"><span class="pre">node.resources.node_resources.NodeResources</span></code></a>) &#8211; The resource shortage</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="scheduler.resources.agent.AgentResources.set_total">
<code class="descname">set_total</code><span class="sig-paren">(</span><em>total_resources</em><span class="sig-paren">)</span><a class="headerlink" href="#scheduler.resources.agent.AgentResources.set_total" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the total resources for the agent</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>total_resources</strong> (<a class="reference internal" href="node.resources.html#node.resources.node_resources.NodeResources" title="node.resources.node_resources.NodeResources"><code class="xref py py-class docutils literal"><span class="pre">node.resources.node_resources.NodeResources</span></code></a>) &#8211; The total resources</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="scheduler.resources.agent.ResourceSet">
<em class="property">class </em><code class="descclassname">scheduler.resources.agent.</code><code class="descname">ResourceSet</code><span class="sig-paren">(</span><em>offered_resources=None</em>, <em>task_resources=None</em>, <em>watermark_resources=None</em><span class="sig-paren">)</span><a class="headerlink" href="#scheduler.resources.agent.ResourceSet" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>This class represents a set of resources on an agent</p>
</dd></dl>

</div>
<div class="section" id="module-scheduler.resources.manager">
<span id="scheduler-resources-manager-module"></span><h2>scheduler.resources.manager module<a class="headerlink" href="#module-scheduler.resources.manager" title="Permalink to this headline">¶</a></h2>
<p>Defines the class that manages all scheduler resources</p>
<dl class="class">
<dt id="scheduler.resources.manager.ResourceManager">
<em class="property">class </em><code class="descclassname">scheduler.resources.manager.</code><code class="descname">ResourceManager</code><a class="headerlink" href="#scheduler.resources.manager.ResourceManager" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>This class manages all resources from the cluster nodes. This class is thread-safe.</p>
<dl class="method">
<dt id="scheduler.resources.manager.ResourceManager.add_new_offers">
<code class="descname">add_new_offers</code><span class="sig-paren">(</span><em>offers</em><span class="sig-paren">)</span><a class="headerlink" href="#scheduler.resources.manager.ResourceManager.add_new_offers" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds new resource offers to the manager</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>offers</strong> ([<a class="reference internal" href="#scheduler.resources.offer.ResourceOffer" title="scheduler.resources.offer.ResourceOffer"><code class="xref py py-class docutils literal"><span class="pre">scheduler.resources.offer.ResourceOffer</span></code></a>]) &#8211; The list of new offers to add</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="scheduler.resources.manager.ResourceManager.allocate_offers">
<code class="descname">allocate_offers</code><span class="sig-paren">(</span><em>resources</em>, <em>when</em><span class="sig-paren">)</span><a class="headerlink" href="#scheduler.resources.manager.ResourceManager.allocate_offers" title="Permalink to this definition">¶</a></dt>
<dd><p>Directs all agents to allocate offers sufficient to match the given resources. Any offers that have been held
too long will automatically be included (including agents that resources were not requested from). It&#8217;s possible
that the offer resources returned for an agent are less than requested or that an agent is not included in the
results.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>resources</strong> (<em>dict</em>) &#8211; Dict where agent ID maps to the requested resources</li>
<li><strong>when</strong> (<code class="xref py py-class docutils literal"><span class="pre">datetime.datetime</span></code>) &#8211; The current time</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">Dict where agent ID maps to a list of the allocated offers</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">dict</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="scheduler.resources.manager.ResourceManager.clear">
<code class="descname">clear</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#scheduler.resources.manager.ResourceManager.clear" title="Permalink to this definition">¶</a></dt>
<dd><p>Clears all offer data from the manager. This method is intended for testing only.</p>
</dd></dl>

<dl class="method">
<dt id="scheduler.resources.manager.ResourceManager.decline_offers">
<code class="descname">decline_offers</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#scheduler.resources.manager.ResourceManager.decline_offers" title="Permalink to this definition">¶</a></dt>
<dd><p>Directs all agents to remove offers that have not been allocated and return them to be declined by the scheduler.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">list of offers to decline</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><code class="xref py py-func docutils literal"><span class="pre">list()</span></code></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="scheduler.resources.manager.ResourceManager.generate_status_json">
<code class="descname">generate_status_json</code><span class="sig-paren">(</span><em>status_dict</em><span class="sig-paren">)</span><a class="headerlink" href="#scheduler.resources.manager.ResourceManager.generate_status_json" title="Permalink to this definition">¶</a></dt>
<dd><p>Generates the portion of the status JSON that describes the resources</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>status_dict</strong> (<em>dict</em>) &#8211; The status JSON dict</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="scheduler.resources.manager.ResourceManager.get_all_available_resources">
<code class="descname">get_all_available_resources</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#scheduler.resources.manager.ResourceManager.get_all_available_resources" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets the total of all of the available resources across all agents</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">A copy of these resources</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><code class="xref py py-class docutils literal"><span class="pre">dict</span></code></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="scheduler.resources.manager.ResourceManager.get_max_available_resources">
<code class="descname">get_max_available_resources</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#scheduler.resources.manager.ResourceManager.get_max_available_resources" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets the maximum available resources across all agents</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">A copy of these resources</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference internal" href="node.resources.html#node.resources.node_resources.NodeResources" title="node.resources.node_resources.NodeResources"><code class="xref py py-class docutils literal"><span class="pre">node.resources.node_resources.NodeResources</span></code></a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="scheduler.resources.manager.ResourceManager.get_queued_resources">
<code class="descname">get_queued_resources</code><span class="sig-paren">(</span><em>statuses=[u'PENDING', u'QUEUED', u'RUNNING']</em><span class="sig-paren">)</span><a class="headerlink" href="#scheduler.resources.manager.ResourceManager.get_queued_resources" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets the total cluster resources, how many jobs are queued, and how much total
resources the queued jobs require. Includes information for pending, queued, and
running.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>statuses</strong> &#8211; The list of possible statuses a job could have that should be
included.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">A dictionary of information about jobs queued.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><code class="xref py py-class docutils literal"><span class="pre">dict</span></code></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="scheduler.resources.manager.ResourceManager.lost_agent">
<code class="descname">lost_agent</code><span class="sig-paren">(</span><em>agent_id</em><span class="sig-paren">)</span><a class="headerlink" href="#scheduler.resources.manager.ResourceManager.lost_agent" title="Permalink to this definition">¶</a></dt>
<dd><p>Informs the manager that the agent with the given ID was lost and has gone offline</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>agent_id</strong> (<em>str</em>) &#8211; The ID of the lost agent</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="scheduler.resources.manager.ResourceManager.refresh_agent_resources">
<code class="descname">refresh_agent_resources</code><span class="sig-paren">(</span><em>tasks</em>, <em>when</em><span class="sig-paren">)</span><a class="headerlink" href="#scheduler.resources.manager.ResourceManager.refresh_agent_resources" title="Permalink to this definition">¶</a></dt>
<dd><p>Refreshes the agents with the current tasks that are running on them and with the new resource offers that
have been added to the manager since the last time this method was called. Returns a dict containing all of the
current offered resources and watermark resources for each agent.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>tasks</strong> ([<a class="reference internal" href="job.tasks.html#job.tasks.base_task.Task" title="job.tasks.base_task.Task"><code class="xref py py-class docutils literal"><span class="pre">job.tasks.base_task.Task</span></code></a>]) &#8211; The current running tasks</li>
<li><strong>when</strong> (<code class="xref py py-class docutils literal"><span class="pre">datetime.datetime</span></code>) &#8211; The current time</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">Dict where agent ID maps to a copy of the set of resources for the agent</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">dict</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="scheduler.resources.manager.ResourceManager.rescind_offers">
<code class="descname">rescind_offers</code><span class="sig-paren">(</span><em>offer_ids</em><span class="sig-paren">)</span><a class="headerlink" href="#scheduler.resources.manager.ResourceManager.rescind_offers" title="Permalink to this definition">¶</a></dt>
<dd><p>Rescinds the offers with the given IDs from the manager</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>offer_ids</strong> (<code class="xref py py-func docutils literal"><span class="pre">list()</span></code>) &#8211; The list of IDs of the offers to rescind</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="scheduler.resources.manager.ResourceManager.set_agent_shortages">
<code class="descname">set_agent_shortages</code><span class="sig-paren">(</span><em>agent_shortages</em><span class="sig-paren">)</span><a class="headerlink" href="#scheduler.resources.manager.ResourceManager.set_agent_shortages" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets any resource shortages on the appropriate agents</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>agent_shortages</strong> (<em>dict</em>) &#8211; Dict where resource shortage is stored by agent ID</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="scheduler.resources.manager.ResourceManager.sync_with_mesos">
<code class="descname">sync_with_mesos</code><span class="sig-paren">(</span><em>host_address</em><span class="sig-paren">)</span><a class="headerlink" href="#scheduler.resources.manager.ResourceManager.sync_with_mesos" title="Permalink to this definition">¶</a></dt>
<dd><p>Syncs with Mesos to retrieve the resource totals needed by any agents</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>host_address</strong> (<cite>util.host.HostAddress</cite>) &#8211; The address for the Mesos master</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="scheduler.resources.manager.ResourceManager.update_all_cluster_resources">
<code class="descname">update_all_cluster_resources</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#scheduler.resources.manager.ResourceManager.update_all_cluster_resources" title="Permalink to this definition">¶</a></dt>
<dd><p>Updates the values for the currently available resources that
are stored in the database.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-scheduler.resources.offer">
<span id="scheduler-resources-offer-module"></span><h2>scheduler.resources.offer module<a class="headerlink" href="#module-scheduler.resources.offer" title="Permalink to this headline">¶</a></h2>
<p>Defines the class that represents resource offers</p>
<dl class="class">
<dt id="scheduler.resources.offer.ResourceOffer">
<em class="property">class </em><code class="descclassname">scheduler.resources.offer.</code><code class="descname">ResourceOffer</code><span class="sig-paren">(</span><em>offer_id</em>, <em>agent_id</em>, <em>framework_id</em>, <em>node_resources</em>, <em>when</em>, <em>mesos_offer</em><span class="sig-paren">)</span><a class="headerlink" href="#scheduler.resources.offer.ResourceOffer" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>This class represents an offer of resources from a node.</p>
</dd></dl>

</div>
<div class="section" id="module-scheduler.resources">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-scheduler.resources" title="Permalink to this headline">¶</a></h2>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="scheduler.scheduling.html" class="btn btn-neutral float-right" title="scheduler.scheduling package" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="scheduler.recon.html" class="btn btn-neutral float-left" title="scheduler.recon package" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2015, NGA

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>