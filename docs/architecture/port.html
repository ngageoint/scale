

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Import/Export &mdash; Scale 3.0 documentation</title>
  

  
  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="Scale 3.0 documentation" href="../index.html"/>
        <link rel="up" title="Architecture" href="index.html"/>
        <link rel="next" title="Strike" href="strike.html"/>
        <link rel="prev" title="Recipe Data" href="jobs/recipe_data.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> Scale
          

          
            
            <img src="../_static/scale3-transparent-128.png" class="logo" />
          
          </a>

          
            
            
              <div class="version">
                3.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../overview/index.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../interface/index.html">Interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../algorithms/index.html">Algorithms</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Architecture</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="overview.html">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="jobs/index.html">Jobs and Recipes</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="">Import/Export</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#import-export-configuration-specification-version-1-0">Import/Export Configuration Specification Version 1.0</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="strike.html">Strike</a></li>
<li class="toctree-l2"><a class="reference internal" href="triggers.html">Triggers</a></li>
<li class="toctree-l2"><a class="reference internal" href="workspaces.html">Workspaces</a></li>
<li class="toctree-l2"><a class="reference internal" href="django/index.html">Django/Code Base</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../install/index.html">Install</a></li>
<li class="toctree-l1"><a class="reference internal" href="../development/index.html">Development</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">Scale</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          





<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
          <li><a href="index.html">Architecture</a> &raquo;</li>
      
    <li>Import/Export</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/architecture/port.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="import-export">
<span id="architecture-port"></span><h1>Import/Export<a class="headerlink" href="#import-export" title="Permalink to this headline">¶</a></h1>
<p>Scale has the ability to export and import certain configuration settings related to executing workflows such as errors,
job types, and recipe types. This feature allows a user to build a recipe or job in one installation for testing
purposes and then easily migrate it to another installation for production use without having to reconstruct everything
using the web application user interface.</p>
<p>Operating this way has a number of advantages. It permits trying things out without affecting the production system. It
saves time since wiring up all the recipe connections can be time consuming. It avoids potential errors that could be
introduced by manually recreating a fully tested and working configuration. It helps with upgrades since the import
process has the ability to handle some types of changes automatically for the user. The import process is different than
a traditional database dump/restore in that it includes a lot of logic to ensure that a job type or recipe type cannot
be changed in a way that would invalidate its connections/dependencies. It also keeps track of past versions and
snapshots the definitions/interfaces that were used at the time each execution took place.</p>
<p>Future versions of the import system may assist the user with additional types of changes by using a wizard-based guide,
prompting the user for how certain conflicts should be resolved.</p>
<p><strong>Example configuration export:</strong></p>
<div class="highlight-javascript"><div class="highlight"><pre><span></span><span class="p">{</span>
   <span class="s2">&quot;version&quot;</span><span class="o">:</span> <span class="s2">&quot;1.0&quot;</span><span class="p">,</span>
   <span class="s2">&quot;errors&quot;</span><span class="o">:</span> <span class="p">[</span>
      <span class="p">{</span>
         <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;my-error&quot;</span><span class="p">,</span>
         <span class="s2">&quot;title&quot;</span><span class="o">:</span> <span class="s2">&quot;My Error&quot;</span><span class="p">,</span>
         <span class="s2">&quot;description&quot;</span><span class="o">:</span> <span class="s2">&quot;My error description.&quot;</span><span class="p">,</span>
         <span class="s2">&quot;category&quot;</span><span class="o">:</span> <span class="s2">&quot;DATA&quot;</span>
      <span class="p">}</span>
   <span class="p">],</span>
   <span class="s2">&quot;job_types&quot;</span><span class="o">:</span> <span class="p">[</span>
      <span class="p">{</span>
         <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;my-job&quot;</span><span class="p">,</span>
         <span class="s2">&quot;version&quot;</span><span class="o">:</span> <span class="s2">&quot;1.0.0&quot;</span><span class="p">,</span>
         <span class="s2">&quot;title&quot;</span><span class="o">:</span> <span class="s2">&quot;My Job&quot;</span><span class="p">,</span>
         <span class="s2">&quot;description&quot;</span><span class="o">:</span> <span class="s2">&quot;My job description.&quot;</span><span class="p">,</span>
         <span class="s2">&quot;category&quot;</span><span class="o">:</span> <span class="s2">&quot;example&quot;</span><span class="p">,</span>
         <span class="s2">&quot;author_name&quot;</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
         <span class="s2">&quot;author_url&quot;</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
         <span class="s2">&quot;is_operational&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
         <span class="s2">&quot;icon_code&quot;</span><span class="o">:</span> <span class="s2">&quot;f013&quot;</span><span class="p">,</span>
         <span class="s2">&quot;docker_privileged&quot;</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
         <span class="s2">&quot;docker_image&quot;</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
         <span class="s2">&quot;priority&quot;</span><span class="o">:</span> <span class="mi">100</span><span class="p">,</span>
         <span class="s2">&quot;timeout&quot;</span><span class="o">:</span> <span class="mi">1800</span><span class="p">,</span>
         <span class="s2">&quot;max_tries&quot;</span><span class="o">:</span> <span class="mi">3</span><span class="p">,</span>
         <span class="s2">&quot;cpus_required&quot;</span><span class="o">:</span> <span class="mf">1.0</span><span class="p">,</span>
         <span class="s2">&quot;mem_required&quot;</span><span class="o">:</span> <span class="mf">64.0</span><span class="p">,</span>
         <span class="s2">&quot;disk_out_const_required&quot;</span><span class="o">:</span> <span class="mf">64.0</span><span class="p">,</span>
         <span class="s2">&quot;disk_out_mult_required&quot;</span><span class="o">:</span> <span class="mf">0.0</span><span class="p">,</span>
         <span class="s2">&quot;interface&quot;</span><span class="o">:</span> <span class="p">{</span>
            <span class="s2">&quot;version&quot;</span><span class="o">:</span> <span class="s2">&quot;1.0&quot;</span><span class="p">,</span>
            <span class="s2">&quot;command&quot;</span><span class="o">:</span> <span class="s2">&quot;my-cmd&quot;</span><span class="p">,</span>
            <span class="s2">&quot;command_arguments&quot;</span><span class="o">:</span> <span class="s2">&quot;${input_file} ${job_output_dir}&quot;</span><span class="p">,</span>
            <span class="s2">&quot;input_data&quot;</span><span class="o">:</span> <span class="p">[</span>
               <span class="p">{</span>
                  <span class="s2">&quot;media_types&quot;</span><span class="o">:</span> <span class="p">[</span>
                     <span class="s2">&quot;image/png&quot;</span>
                  <span class="p">],</span>
                  <span class="s2">&quot;required&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
                  <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;file&quot;</span><span class="p">,</span>
                  <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;input_file&quot;</span>
               <span class="p">}</span>
            <span class="p">],</span>
            <span class="s2">&quot;output_data&quot;</span><span class="o">:</span> <span class="p">[</span>
               <span class="p">{</span>
                  <span class="s2">&quot;media_type&quot;</span><span class="o">:</span> <span class="s2">&quot;image/jpg&quot;</span><span class="p">,</span>
                  <span class="s2">&quot;required&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
                  <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;file&quot;</span><span class="p">,</span>
                  <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;my-output-file&quot;</span>
               <span class="p">}</span>
            <span class="p">],</span>
            <span class="s2">&quot;shared_resources&quot;</span><span class="o">:</span> <span class="p">[]</span>
         <span class="p">}</span>
         <span class="s2">&quot;error_mapping&quot;</span><span class="o">:</span> <span class="p">{</span>
            <span class="s2">&quot;version&quot;</span><span class="o">:</span> <span class="s2">&quot;1.0&quot;</span><span class="p">,</span>
            <span class="s2">&quot;exit_codes&quot;</span><span class="o">:</span> <span class="p">{</span>
               <span class="s2">&quot;1&quot;</span><span class="o">:</span> <span class="s2">&quot;my-error&quot;</span>
            <span class="p">}</span>
         <span class="p">},</span>
         <span class="s2">&quot;trigger_rule&quot;</span><span class="o">:</span> <span class="p">{</span>
            <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;PARSE&quot;</span><span class="p">,</span>
            <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;my-rule&quot;</span><span class="p">,</span>
            <span class="s2">&quot;configuration&quot;</span><span class="o">:</span> <span class="p">{</span>
               <span class="s2">&quot;version&quot;</span><span class="o">:</span> <span class="s2">&quot;1.0&quot;</span><span class="p">,</span>
               <span class="s2">&quot;data&quot;</span><span class="o">:</span> <span class="p">{</span>
                  <span class="s2">&quot;workspace_name&quot;</span><span class="o">:</span> <span class="s2">&quot;products&quot;</span><span class="p">,</span>
                  <span class="s2">&quot;input_data_name&quot;</span><span class="o">:</span> <span class="s2">&quot;input_file&quot;</span>
               <span class="p">},</span>
               <span class="s2">&quot;condition&quot;</span><span class="o">:</span> <span class="p">{</span>
                  <span class="s2">&quot;media_type&quot;</span><span class="o">:</span> <span class="s2">&quot;image/png&quot;</span><span class="p">,</span>
                  <span class="s2">&quot;data_types&quot;</span><span class="o">:</span> <span class="p">[]</span>
               <span class="p">}</span>
            <span class="p">}</span>
         <span class="p">}</span>
      <span class="p">}</span>
   <span class="p">],</span>
   <span class="s2">&quot;recipe_types&quot;</span><span class="o">:</span> <span class="p">[</span>
      <span class="p">{</span>
         <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;my-recipe&quot;</span><span class="p">,</span>
         <span class="s2">&quot;version&quot;</span><span class="o">:</span> <span class="s2">&quot;1.0.0&quot;</span><span class="p">,</span>
         <span class="s2">&quot;title&quot;</span><span class="o">:</span> <span class="s2">&quot;My Recipe&quot;</span><span class="p">,</span>
         <span class="s2">&quot;description&quot;</span><span class="o">:</span> <span class="s2">&quot;My recipe description.&quot;</span><span class="p">,</span>
         <span class="s2">&quot;definition&quot;</span><span class="o">:</span> <span class="p">{</span>
            <span class="s2">&quot;version&quot;</span><span class="o">:</span> <span class="s2">&quot;1.0&quot;</span><span class="p">,</span>
            <span class="s2">&quot;input_data&quot;</span><span class="o">:</span> <span class="p">[</span>
               <span class="p">{</span>
                  <span class="s2">&quot;media_types&quot;</span><span class="o">:</span> <span class="p">[</span>
                     <span class="s2">&quot;image/png&quot;</span>
                  <span class="p">],</span>
                  <span class="s2">&quot;required&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
                  <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;file&quot;</span><span class="p">,</span>
                  <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;input_file&quot;</span>
                <span class="p">}</span>
            <span class="p">],</span>
            <span class="s2">&quot;jobs&quot;</span><span class="o">:</span> <span class="p">[]</span>
         <span class="p">},</span>
         <span class="s2">&quot;trigger_rule&quot;</span><span class="o">:</span> <span class="p">{</span>
            <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;PARSE&quot;</span><span class="p">,</span>
            <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;my-rule&quot;</span><span class="p">,</span>
            <span class="s2">&quot;configuration&quot;</span><span class="o">:</span> <span class="p">{</span>
               <span class="s2">&quot;version&quot;</span><span class="o">:</span> <span class="s2">&quot;1.0&quot;</span><span class="p">,</span>
               <span class="s2">&quot;data&quot;</span><span class="o">:</span> <span class="p">{</span>
                  <span class="s2">&quot;workspace_name&quot;</span><span class="o">:</span> <span class="s2">&quot;products&quot;</span><span class="p">,</span>
                  <span class="s2">&quot;input_data_name&quot;</span><span class="o">:</span> <span class="s2">&quot;input_file&quot;</span>
               <span class="p">},</span>
               <span class="s2">&quot;condition&quot;</span><span class="o">:</span> <span class="p">{</span>
                  <span class="s2">&quot;media_type&quot;</span><span class="o">:</span> <span class="s2">&quot;image/png&quot;</span><span class="p">,</span>
                  <span class="s2">&quot;data_types&quot;</span><span class="o">:</span> <span class="p">[]</span>
               <span class="p">}</span>
            <span class="p">}</span>
         <span class="p">}</span>
      <span class="p">}</span>
   <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The <em>errors</em> field is used to define the meaning of any exit codes that a job type may produce at the end of its
execution when it detects a known problem. The <em>job_types</em> field lists all of the types of jobs to import, which is the
smallest unit of work in Scale. A job type includes basic attributes, as well as all the associated error mappings,
command line interface, and trigger rule that kicks off the job as data arrives. The <em>recipe_types</em> field lists all of
the types of recipes to import, which is used to build a processing workflow composed of job types to execute under
different conditions. Recipes types support sequential and/or parallel processing constructs and therefore can trigger
processing as data arrives or other jobs generate products upon completion. To see all of the options for an exported
configuration, please refer to the Configuration Specification below.</p>
<div class="section" id="import-export-configuration-specification-version-1-0">
<span id="architecture-port-spec"></span><h2>Import/Export Configuration Specification Version 1.0<a class="headerlink" href="#import-export-configuration-specification-version-1-0" title="Permalink to this headline">¶</a></h2>
<p>A valid exported configuration is a JSON document with the following structure:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span></span><span class="p">{</span>
   <span class="s2">&quot;version&quot;</span><span class="o">:</span> <span class="s2">&quot;1.0&quot;</span><span class="p">,</span>
   <span class="s2">&quot;errors&quot;</span><span class="o">:</span> <span class="p">[</span>
      <span class="p">...</span>
   <span class="p">],</span>
   <span class="s2">&quot;job_types&quot;</span><span class="o">:</span> <span class="p">[</span>
      <span class="p">...</span>
   <span class="p">],</span>
   <span class="s2">&quot;recipe_types&quot;</span><span class="o">:</span> <span class="p">[</span>
      <span class="p">...</span>
   <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p><strong>version</strong>: JSON string</p>
<blockquote>
<div>The <em>version</em> is an optional string value that defines the version of the configuration used. This allows updates to
be made to the specification while maintaining backwards compatibility by allowing Scale to recognize an older
version and convert it to the current version. The default value for <em>version</em> if it is not included is the latest
version, which is currently 1.0. It is recommended, though not required, that you include the <em>version</em> so that
future changes to the specification will still accept your ingest trigger rule configuration.</div></blockquote>
<p><strong>errors</strong>: JSON array</p>
<blockquote>
<div>The <em>errors</em> field is optional and contains JSON objects that define attributes required to import a new error or
edit an existing error identified by the name attribute.</div></blockquote>
<p><strong>job_types</strong>: JSON array</p>
<blockquote>
<div>The <em>job_types</em> field is optional and contains JSON objects that define attributes required to import a new job type
or edit an existing job type identified by the combination of the name and version attributes.</div></blockquote>
<p><strong>recipe_types</strong>: JSON array</p>
<blockquote>
<div>The <em>recipe_types</em> field is optional and contains JSON objects that define attributes required to import a new
recipe type or edit an existing recipe type identified by the combination of the name and version attributes.</div></blockquote>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="strike.html" class="btn btn-neutral float-right" title="Strike" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="jobs/recipe_data.html" class="btn btn-neutral" title="Recipe Data" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015, NGA.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'3.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>